"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
"""
from sqlalchemy.orm import Session
from app.database import SessionLocal
from app.models import (
    Category, Course, Lesson, Block, Achievement, User, UserStatistics
)
from app.utils.password import hash_password
from datetime import datetime


def seed_categories(db: Session):
    """–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"""
    categories_data = [
        {"id": "business", "name": "–ë–∏–∑–Ω–µ—Å –∏ —Ñ–∏–Ω–∞–Ω—Å—ã", "icon": "üíº"},
        {"id": "science", "name": "–ù–∞—É–∫–∞", "icon": "üî¨"},
        {"id": "tech", "name": "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏", "icon": "üíª"},
        {"id": "health", "name": "–ó–¥–æ—Ä–æ–≤—å–µ –∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å", "icon": "üèÉ"},
        {"id": "mindset", "name": "–ú—ã—à–ª–µ–Ω–∏–µ", "icon": "üß†"},
    ]
    
    for cat_data in categories_data:
        existing = db.query(Category).filter(Category.id == cat_data["id"]).first()
        if not existing:
            category = Category(**cat_data)
            db.add(category)
    
    db.commit()
    print("Categories seeded")


def seed_achievements(db: Session):
    """–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è"""
    achievements_data = [
        {"id": "first_step", "title": "–ü–µ—Ä–≤—ã–π —à–∞–≥", "description": "–ó–∞–≤–µ—Ä—à–∏—Ç–µ –ø–µ—Ä–≤—ã–π —É—Ä–æ–∫", "icon": "üèÜ", "max_progress": None},
        {"id": "seven_days", "title": "7 –¥–Ω–µ–π", "description": "–ó–∞–Ω–∏–º–∞–π—Ç–µ—Å—å 7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥", "icon": "üî•", "max_progress": 7},
        {"id": "hundred_cards", "title": "100 –∫–∞—Ä—Ç–æ—á–µ–∫", "description": "–ü—Ä–æ–π–¥–∏—Ç–µ 100 –∫–∞—Ä—Ç–æ—á–µ–∫", "icon": "üß†", "max_progress": 100},
        {"id": "excellent", "title": "–û—Ç–ª–∏—á–Ω–∏–∫", "description": "–î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ 90% —Ç–æ—á–Ω–æ—Å—Ç–∏", "icon": "‚≠ê", "max_progress": 90},
        {"id": "fast_start", "title": "–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç", "description": "–ó–∞–≤–µ—Ä—à–∏—Ç–µ 5 —É—Ä–æ–∫–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é", "icon": "üöÄ", "max_progress": 5},
        {"id": "persistence", "title": "–£–ø–æ—Ä—Å—Ç–≤–æ", "description": "–ó–∞–Ω–∏–º–∞–π—Ç–µ—Å—å 30 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥", "icon": "üí™", "max_progress": 30},
        {"id": "all_courses", "title": "–í—Å–µ –∫—É—Ä—Å—ã", "description": "–ó–∞–≤–µ—Ä—à–∏—Ç–µ –≤—Å–µ –∫—É—Ä—Å—ã", "icon": "üëë", "max_progress": None},
        {"id": "perfect", "title": "100% —Ç–æ—á–Ω–æ—Å—Ç—å", "description": "–î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ 100% —Ç–æ—á–Ω–æ—Å—Ç–∏ –≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ", "icon": "üéØ", "max_progress": 100},
    ]
    
    for ach_data in achievements_data:
        existing = db.query(Achievement).filter(Achievement.id == ach_data["id"]).first()
        if not existing:
            achievement = Achievement(**ach_data)
            db.add(achievement)
    
    db.commit()
    print("Achievements seeded")


def seed_course_tm_inter_002(db: Session):
    """–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫—É—Ä—Å TM-INTER-002"""
    # –°–æ–∑–¥–∞–µ–º –∫—É—Ä—Å
    course_data = {
        "course_id": "TM-INTER-002",
        "title": "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –í—Ä–µ–º–µ–Ω–∏: –°–∏—Å—Ç–µ–º–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∏ –ì–ª—É–±–æ–∫–∞—è —Ä–∞–±–æ—Ç–∞",
        "category_id": "health",
        "subcategory": "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ç–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç",
        "level": "–°—Ä–µ–¥–Ω–∏–π",
        "difficulty_score": 4,
        "estimated_duration_weeks": 1,
        "estimated_duration_hours": 5,
        "total_lessons": 5,
        "total_practice_tasks": 25,
        "tags": ["–≥–ª—É–±–æ–∫–∞—è —Ä–∞–±–æ—Ç–∞", "–ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏—è", "GTD", "—Ö—Ä–æ–Ω–æ—Ç–∏–ø—ã", "—Ü–∏—Ñ—Ä–æ–≤–æ–π –º–∏–Ω–∏–º–∞–ª–∏–∑–º", "–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞"],
        "author": "–ö–æ–º–∞–Ω–¥–∞ Te–ü—Ä–∞–π–º–∏–Ω–≥",
        "status": "active",
        "language": "ru",
        "target_audience": ["—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–∏", "–∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã", "—Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä—ã", "–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–∏", "–≤—Å–µ, –∫—Ç–æ —Ö–æ—á–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≥–ª—É–±–∂–µ –∏ —Å–∏—Å—Ç–µ–º–Ω–µ–µ"],
        "completion_certificate": True,
        "short_description": "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∫—É—Ä—Å –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –æ—Å–≤–æ–∏–ª –æ—Å–Ω–æ–≤—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è. –ù–∞—É—á–∏—Ç–µ—Å—å –≤—Ö–æ–¥–∏—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ç–æ–∫–∞, —É–ø—Ä–∞–≤–ª—è—Ç—å —Ö—Ä–æ–Ω–æ—Ç–∏–ø–æ–º, –ø–æ–±–µ–∂–¥–∞—Ç—å –ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏—é –Ω–∞ –Ω–µ–π—Ä–æ–±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º —É—Ä–æ–≤–Ω–µ –∏ —Å—Ç—Ä–æ–∏—Ç—å –Ω–∞–¥–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É –≤–Ω–µ—à–Ω–µ–≥–æ –º–æ–∑–≥–∞.",
        "full_description": "–ö—É—Ä—Å ¬´–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –í—Ä–µ–º–µ–Ω–∏¬ª ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è. –í—ã –Ω–∞—É—á–∏—Ç–µ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º —Ö—Ä–æ–Ω–æ—Ç–∏–ø–æ–º, –æ—Å–≤–æ–∏—Ç–µ —Ä–µ–∂–∏–º ¬´–ì–ª—É–±–æ–∫–æ–π —Ä–∞–±–æ—Ç—ã¬ª (Deep Work) –ø–æ –ö—ç–ª—É –ù—å—é–ø–æ—Ä—Ç—É, —Ä–∞–∑–±–µ—Ä–µ—Ç–µ—Å—å —Å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∫–æ—Ä–Ω—è–º–∏ –ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏–∏, –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É GTD –¥–ª—è —Ä–∞–∑–≥—Ä—É–∑–∫–∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –º–æ–∑–≥–∞ –∏ –∑–∞—â–∏—Ç–∏—Ç–µ —Å–≤–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –æ—Ç —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –æ—Ç–≤–ª–µ—á–µ–Ω–∏–π. –ö—É—Ä—Å –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –Ω–µ–π—Ä–æ–±–∏–æ–ª–æ–≥–∏–∏, –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è—Ö.",
        "learning_outcomes": [
            "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ —Ö—Ä–æ–Ω–æ—Ç–∏–ø–∞ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∏–∫–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
            "–û—Å–≤–æ–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫ –ì–ª—É–±–æ–∫–æ–π —Ä–∞–±–æ—Ç—ã –∏ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è",
            "–ü–æ–Ω–∏–º–∞–Ω–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏–∏ –∏ —Ç–µ—Ö–Ω–∏–∫–∏ –±–æ—Ä—å–±—ã —Å –Ω–µ–π",
            "–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã GTD –¥–ª—è –≤—ã–≥—Ä—É–∑–∫–∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏",
            "–°–æ–∑–¥–∞–Ω–∏–µ —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å—Ä–µ–¥—ã, –∑–∞—â–∏—â–∞—é—â–µ–π –≤–Ω–∏–º–∞–Ω–∏–µ –æ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —ç–∫–æ–Ω–æ–º–∏–∫–∏ –≤–Ω–∏–º–∞–Ω–∏—è",
            "–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏ –∫ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –æ–±–∑–æ—Ä–∞–º –∏ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –º—ã—à–ª–µ–Ω–∏—é"
        ],
        "prerequisites": ["–ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è —Ç–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞", "–û–ø—ã—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á", "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–∞–º–æ–∞–Ω–∞–ª–∏–∑—É –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –ø—Ä–∏–≤—ã—á–µ–∫"],
        "cover_image_url": "https://example.com/covers/tm-inter-002.jpg",
        "promo_video_url": "https://example.com/promo/tm-inter-002.mp4"
    }
    
    existing_course = db.query(Course).filter(Course.course_id == "TM-INTER-002").first()
    if existing_course:
        print("Course TM-INTER-002 already exists, skipping...")
        return
    
    course = Course(**course_data)
    db.add(course)
    db.flush()
    
    # –£—Ä–æ–∫ 1
    lesson_1 = Lesson(
        id="lesson_1",
        course_id="TM-INTER-002",
        order=1,
        title="–•—Ä–æ–Ω–æ—Ç–∏–ø—ã: –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∏–æ—Ä–∏—Ç–º–æ–≤",
        description="–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤–æ–π —Ö—Ä–æ–Ω–æ—Ç–∏–ø (–ø–æ –ë—Ä–µ—É—Å—É) –∏ –ø–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ —Ç–∞–∫, —á—Ç–æ–±—ã —Å–∞–º—ã–µ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ–ø–∞–¥–∞–ª–∏ –Ω–∞ –ø–∏–∫ –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏."
    )
    db.add(lesson_1)
    db.flush()
    
    # –ë–ª–æ–∫–∏ —É—Ä–æ–∫–∞ 1
    blocks_1 = [
        Block(id="block_1_1", lesson_id="lesson_1", type="theory", order=1,
              title="–•—Ä–æ–Ω–æ—Ç–∏–ø—ã –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π –¥–∂–µ—Ç–ª–∞–≥",
              content="–°–æ–≤–µ—Ç ¬´–≤—Å—Ç–∞–≤–∞–π –≤ 5 —É—Ç—Ä–∞¬ª —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ –¥–ª—è –≤—Å–µ—Ö. –î–æ–∫—Ç–æ—Ä –ú–∞–π–∫–ª –ë—Ä–µ—É—Å –≤—ã–¥–µ–ª—è–µ—Ç 4 —Ö—Ä–æ–Ω–æ—Ç–∏–ø–∞: –õ—å–≤—ã (—É—Ç—Ä–µ–Ω–Ω–∏–µ), –ú–µ–¥–≤–µ–¥–∏ (–¥–Ω–µ–≤–Ω—ã–µ), –í–æ–ª–∫–∏ (–≤–µ—á–µ—Ä–Ω–∏–µ) –∏ –î–µ–ª—å—Ñ–∏–Ω—ã (—Ç—Ä–µ–≤–æ–∂–Ω—ã–π —Å–æ–Ω). –ü–æ–ø—ã—Ç–∫–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–æ—Ç–∏–≤ —Å–≤–æ–µ–≥–æ —Ö—Ä–æ–Ω–æ—Ç–∏–ø–∞ –≤—ã–∑—ã–≤–∞–µ—Ç ¬´—Å–æ—Ü–∏–∞–ª—å–Ω—ã–π –¥–∂–µ—Ç–ª–∞–≥¬ª ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–æ–π —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.",
              visualization_hint="–ß–µ—Ç—ã—Ä–µ –∏–∫–æ–Ω–∫–∏ –∂–∏–≤–æ—Ç–Ω—ã—Ö —Å —á–∞—Å–∞–º–∏. –õ–µ–≤ (–ø–∏–∫ 08:00‚Äì12:00), –ú–µ–¥–≤–µ–¥—å (10:00‚Äì14:00), –í–æ–ª–∫ (16:00‚Äì20:00), –î–µ–ª—å—Ñ–∏–Ω (—Ö–∞–æ—Ç–∏—á–Ω—ã–µ –ø–∏–∫–∏)."),
        Block(id="block_1_2", lesson_id="lesson_1", type="practice", subtype="multiple_choice", order=2,
              title="–í–æ–ø—Ä–æ—Å —Å –≤—ã–±–æ—Ä–æ–º –æ—Ç–≤–µ—Ç–∞: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞",
              question="–í–ª–∞–¥–∏–º–∏—Ä ‚Äî —Ç–∏–ø–∏—á–Ω—ã–π ¬´–í–æ–ª–∫¬ª. –û–Ω —Å —Ç—Ä—É–¥–æ–º –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è –≤ 9 —É—Ç—Ä–∞, –Ω–æ —á—É–≤—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–ª–∏–≤ —Å–∏–ª –∫ 18:00. –ù–∞—á–∞–ª—å–Ω–∏–∫ —Å—Ç–∞–≤–∏—Ç –≤–∞–∂–Ω—ã–µ –ø–ª–∞–Ω–µ—Ä–∫–∏ –Ω–∞ 9:30. –ö–∞–∫ –í–ª–∞–¥–∏–º–∏—Ä—É –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É—â–µ—Ä–± –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏?",
              options=["–ü–∏—Ç—å –±–æ–ª—å—à–µ –∫–æ—Ñ–µ —Å —É—Ç—Ä–∞ –∏ –∑–∞—Å—Ç–∞–≤–ª—è—Ç—å —Å–µ–±—è —Ä–∞–±–æ—Ç–∞—Ç—å.", "–î–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Å–ª–æ–∂–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –≤—Ç–æ—Ä—É—é –ø–æ–ª–æ–≤–∏–Ω—É –¥–Ω—è, –∞ —É—Ç—Ä–æ –ø–æ—Å–≤—è—Ç–∏—Ç—å —Ä—É—Ç–∏–Ω–µ, –Ω–µ —Ç—Ä–µ–±—É—é—â–µ–π –∫—Ä–µ–∞—Ç–∏–≤–∞.", "–ü—ã—Ç–∞—Ç—å—Å—è –ª–æ–∂–∏—Ç—å—Å—è —Å–ø–∞—Ç—å –≤ 21:00, —á—Ç–æ–±—ã —Å—Ç–∞—Ç—å ¬´–õ—å–≤–æ–º¬ª (—ç—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏)."],
              hints=["–•—Ä–æ–Ω–æ—Ç–∏–ø –∏–∑–º–µ–Ω–∏—Ç—å –∫—Ä–∞–π–Ω–µ —Å–ª–æ–∂–Ω–æ, –ª—É—á—à–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏.", "¬´–í–æ–ª–∫–∏¬ª —É—Ç—Ä–æ–º –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏–Ω–µ—Ä—Ü–∏–∏ —Å–Ω–∞."],
              correct_answer="–î–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Å–ª–æ–∂–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –≤—Ç–æ—Ä—É—é –ø–æ–ª–æ–≤–∏–Ω—É –¥–Ω—è, –∞ —É—Ç—Ä–æ –ø–æ—Å–≤—è—Ç–∏—Ç—å —Ä—É—Ç–∏–Ω–µ, –Ω–µ —Ç—Ä–µ–±—É—é—â–µ–π –∫—Ä–µ–∞—Ç–∏–≤–∞.",
              explanation="–ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–æ–¥ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∏–æ—Ä–∏—Ç–º—ã (¬´—Ä—É—Ç–∏–Ω–∞ —É—Ç—Ä–æ–º, –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –≤–µ—á–µ—Ä–æ–º¬ª) —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –±–æ—Ä—å–±—ã —Å –≥–µ–Ω–µ—Ç–∏–∫–æ–π –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —ç–Ω–µ—Ä–≥–∏—é."),
        Block(id="block_1_3", lesson_id="lesson_1", type="practice", subtype="reflection", order=3,
              title="–†–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å: –ê–Ω–∞–ª–∏–∑ —Å–≤–æ–µ–≥–æ –ø–∏–∫–∞",
              content="–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Å–≤–æ—é –ø—Ä–æ—à–ª—É—é –Ω–µ–¥–µ–ª—é. –í –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –¥–Ω—è (–∏–Ω—Ç–µ—Ä–≤–∞–ª 2‚Äì3 —á–∞—Å–∞) –≤—ã —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —è—Å–Ω–æ—Å—Ç—å —É–º–∞ –∏ –¥—Ä–∞–π–≤, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –ø–∏–ª–∏ –∫–æ—Ñ–µ? –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ —ç—Ç–æ –≤–∞—à–µ–º—É —Ç–µ–∫—É—â–µ–º—É –≥—Ä–∞—Ñ–∏–∫—É —Ä–∞–±–æ—Ç—ã?",
              hints=["–í—Å–ø–æ–º–Ω–∏—Ç–µ –º–æ–º–µ–Ω—Ç—ã, –∫–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞ —à–ª–∞ –ª–µ–≥–∫–æ –∏ –±—ã—Å—Ç—Ä–æ.", "–ï—Å–ª–∏ –≤—ã –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç–µ —Å–µ–±—è —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —ç—Ç–æ –≤—Ä–µ–º—è –Ω–∞–¥ –º–µ–ª–æ—á–∞–º–∏, –≤—ã —Ç–µ—Ä—è–µ—Ç–µ —Ä–µ—Å—É—Ä—Å."],
              sample_answer="–Ø –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ –º–æ–π –ø–∏–∫ —Å 11 –¥–æ 14 —á–∞—Å–æ–≤. –ù–æ –∏–º–µ–Ω–Ω–æ –≤ —ç—Ç–æ –≤—Ä–µ–º—è —è –æ–±—ã—á–Ω–æ –æ—Ç–≤–µ—á–∞—é –Ω–∞ –ø–æ—á—Ç—É, —Ç—Ä–∞—Ç—è ¬´–∑–æ–ª–æ—Ç–æ–µ –≤—Ä–µ–º—è¬ª –Ω–∞ –µ—Ä—É–Ω–¥—É."),
    ]
    
    for block in blocks_1:
        db.add(block)
    
    # –£—Ä–æ–∫ 2
    lesson_2 = Lesson(
        id="lesson_2",
        course_id="TM-INTER-002",
        order=2,
        title="–ì–ª—É–±–æ–∫–∞—è —Ä–∞–±–æ—Ç–∞ (Deep Work)",
        description="–û—Å–≤–æ–∏—Ç—å –∫–æ–Ω—Ü–µ–ø—Ü–∏—é ¬´–ì–ª—É–±–æ–∫–æ–π —Ä–∞–±–æ—Ç—ã¬ª –ö—ç–ª–∞ –ù—å—é–ø–æ—Ä—Ç–∞ –∏ –Ω–∞—É—á–∏—Ç—å—Å—è –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å ¬´–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ¬ª –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –∑–∞–¥–∞—á."
    )
    db.add(lesson_2)
    db.flush()
    
    blocks_2 = [
        Block(id="block_2_1", lesson_id="lesson_2", type="theory", order=1,
              title="–ì–ª—É–±–æ–∫–∞—è —Ä–∞–±–æ—Ç–∞ vs –ú–µ–ª–∫–∞—è —Ä–∞–±–æ—Ç–∞",
              content="–ö—ç–ª –ù—å—é–ø–æ—Ä—Ç –≤–≤–µ–ª —Ç–µ—Ä–º–∏–Ω ¬´–ì–ª—É–±–æ–∫–∞—è —Ä–∞–±–æ—Ç–∞¬ª (Deep Work) ‚Äî —ç—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –±–µ–∑ –æ—Ç–≤–ª–µ—á–µ–Ω–∏–π, –∫–æ–≥–¥–∞ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞ –ø—Ä–µ–¥–µ–ª–µ. –≠—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ü–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤ —ç–ø–æ—Ö—É –ò–ò. –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç—å ‚Äî ¬´–ú–µ–ª–∫–∞—è —Ä–∞–±–æ—Ç–∞¬ª (–ø–æ—á—Ç–∞, —Å–æ–≤–µ—â–∞–Ω–∏—è), –∫–æ—Ç–æ—Ä—É—é –ª–µ–≥–∫–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å.",
              visualization_hint="–ê–π—Å–±–µ—Ä–≥. –ù–∞–¥ –≤–æ–¥–æ–π –º–∞–ª–µ–Ω—å–∫–∞—è –≤–µ—Ä—Ö—É—à–∫–∞ ¬´–ú–µ–ª–∫–∞—è —Ä–∞–±–æ—Ç–∞ (Logistics)¬ª. –ü–æ–¥ –≤–æ–¥–æ–π –æ–≥—Ä–æ–º–Ω–∞—è –≥–ª—ã–±–∞ ¬´–ì–ª—É–±–æ–∫–∞—è —Ä–∞–±–æ—Ç–∞ (Creation)¬ª."),
    ]
    
    for block in blocks_2:
        db.add(block)
    
    # –£—Ä–æ–∫–∏ 3, 4, 5 (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞)
    lessons_data = [
        {"id": "lesson_3", "order": 3, "title": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —Ç–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞ (–ü—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏—è)", "description": "–ü–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏—è ‚Äî —ç—Ç–æ –Ω–µ –ª–µ–Ω—å, –∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º —ç–º–æ—Ü–∏–π, –∏ –Ω–∞—É—á–∏—Ç—å—Å—è –æ–±—Ö–æ–¥–∏—Ç—å —Å—Ç—Ä–∞—Ö –ø–µ—Ä–µ–¥ –∑–∞–¥–∞—á–µ–π."},
        {"id": "lesson_4", "order": 4, "title": "–í–Ω–µ—à–Ω–∏–π –º–æ–∑–≥: –û—Å–Ω–æ–≤—ã —Å–∏—Å—Ç–µ–º—ã GTD (Getting Things Done)", "description": "–û—Å–≤–æ–∏—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø ¬´Inbox¬ª (–í—Ö–æ–¥—è—â–∏–µ) –∏ –Ω–∞—É—á–∏—Ç—å—Å—è –≤—ã–≥—Ä—É–∂–∞—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ –≥–æ–ª–æ–≤—ã –≤–æ –≤–Ω–µ—à–Ω—é—é —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å –º–æ–∑–≥–∞."},
        {"id": "lesson_5", "order": 5, "title": "–¶–∏—Ñ—Ä–æ–≤–æ–π –º–∏–Ω–∏–º–∞–ª–∏–∑–º: –í–Ω–∏–º–∞–Ω–∏–µ –∫–∞–∫ –≤–∞–ª—é—Ç–∞", "description": "–ü–æ–Ω—è—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º—ã ¬´—ç–∫–æ–Ω–æ–º–∏–∫–∏ –≤–Ω–∏–º–∞–Ω–∏—è¬ª –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ü–∏—Ñ—Ä–æ–≤—É—é —Å—Ä–µ–¥—É —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∞ —Å–ª—É–∂–∏–ª–∞ –≤–∞–º, –∞ –Ω–µ –≤—ã –µ–π."},
    ]
    
    for lesson_data in lessons_data:
        lesson = Lesson(
            id=lesson_data["id"],
            course_id="TM-INTER-002",
            order=lesson_data["order"],
            title=lesson_data["title"],
            description=lesson_data["description"]
        )
        db.add(lesson)
        db.flush()
        
        # –î–æ–±–∞–≤–ª—è–µ–º –ø–æ –æ–¥–Ω–æ–º—É –±–ª–æ–∫—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–∫–∞
        block = Block(
            id=f"block_{lesson_data['order']}_1",
            lesson_id=lesson_data["id"],
            type="theory",
            order=1,
            title=f"–¢–µ–æ—Ä–∏—è –¥–ª—è {lesson_data['title']}",
            content=f"–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —É—Ä–æ–∫–∞ {lesson_data['title']}"
        )
        db.add(block)
    
    db.commit()
    print("Course TM-INTER-002 seeded")


def seed_additional_courses(db: Session):
    """–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã"""
    courses_data = [
        {
            "course_id": "BIZ-001",
            "title": "–û—Å–Ω–æ–≤—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏",
            "category_id": "business",
            "subcategory": "–§–∏–Ω–∞–Ω—Å—ã",
            "level": "–õ–µ–≥–∫–∏–π",
            "difficulty_score": 2,
            "estimated_duration_weeks": 2,
            "estimated_duration_hours": 8,
            "total_lessons": 10,
            "total_practice_tasks": 30,
            "tags": ["—Ñ–∏–Ω–∞–Ω—Å—ã", "–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏", "–±—é–¥–∂–µ—Ç"],
            "author": "–ö–æ–º–∞–Ω–¥–∞ Learnify",
            "short_description": "–ò–∑—É—á–∏—Ç–µ –æ—Å–Ω–æ–≤—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏—á–Ω—ã–º–∏ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ –∏ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.",
            "full_description": "–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –ø–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö.",
            "learning_outcomes": ["–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–æ–º", "–û—Å–Ω–æ–≤—ã –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"],
            "prerequisites": [],
            "cover_image_url": "https://example.com/covers/biz-001.jpg"
        },
        {
            "course_id": "SCI-001",
            "title": "–ö–≤–∞–Ω—Ç–æ–≤–∞—è —Ñ–∏–∑–∏–∫–∞ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö",
            "category_id": "science",
            "subcategory": "–§–∏–∑–∏–∫–∞",
            "level": "–°–ª–æ–∂–Ω—ã–π",
            "difficulty_score": 5,
            "estimated_duration_weeks": 4,
            "estimated_duration_hours": 20,
            "total_lessons": 15,
            "total_practice_tasks": 50,
            "tags": ["—Ñ–∏–∑–∏–∫–∞", "–∫–≤–∞–Ω—Ç—ã", "–Ω–∞—É–∫–∞"],
            "author": "–ö–æ–º–∞–Ω–¥–∞ Learnify",
            "short_description": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ –º–∏—Ä –∫–≤–∞–Ω—Ç–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–∏.",
            "full_description": "–ü–æ–¥—Ä–æ–±–Ω—ã–π –∫—É—Ä—Å –ø–æ –∫–≤–∞–Ω—Ç–æ–≤–æ–π —Ñ–∏–∑–∏–∫–µ.",
            "learning_outcomes": ["–ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–≤–∞–Ω—Ç–æ–≤—ã—Ö —è–≤–ª–µ–Ω–∏–π"],
            "prerequisites": ["–ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è —Ñ–∏–∑–∏–∫–∏"],
            "cover_image_url": "https://example.com/covers/sci-001.jpg"
        }
    ]
    
    for course_data in courses_data:
        existing = db.query(Course).filter(Course.course_id == course_data["course_id"]).first()
        if not existing:
            course = Course(**course_data)
            db.add(course)
    
    db.commit()
    print("Additional courses seeded")


def seed_default_user(db: Session):
    """–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é"""
    existing = db.query(User).filter(User.id == 1).first()
    if not existing:
        user = User(
            id=1,
            email="test@example.com",
            hashed_password=hash_password("password123"),
            name="–ê–ª–µ–∫—Å–µ–π",
            level=12,
            xp=1245,
            streak=14,
            daily_goal=5,
            completed_today=3,
            selected_categories=["health", "tech"],
            notifications=[{"time": "09:00"}, {"time": "19:00"}]
        )
        db.add(user)
        
        stats = UserStatistics(
            user_id=1,
            total_lessons=156,
            average_accuracy=87.0,
            days_learning=45,
            total_cards_reviewed=1245
        )
        db.add(stats)
        db.commit()
        print("Default user seeded")


def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö"""
    db = SessionLocal()
    try:
        print("Starting data seeding...")
        seed_categories(db)
        seed_achievements(db)
        seed_course_tm_inter_002(db)
        seed_additional_courses(db)
        seed_default_user(db)
        print("Data seeding completed!")
    except Exception as e:
        print(f"Error seeding data: {e}")
        db.rollback()
        raise
    finally:
        db.close()


if __name__ == "__main__":
    main()

